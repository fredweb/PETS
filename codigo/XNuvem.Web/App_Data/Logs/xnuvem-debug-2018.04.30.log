2018-04-30 12:46:31,979 [1] XNuvem.Environment.DefaultShellEventHandler - On application initialize
2018-04-30 12:46:32,222 [5] XNuvem.Environment.Configuration.ShellSettingsManager - Loading shell configurations
2018-04-30 12:46:32,439 [5] XNuvem.Environment.DefaultShellEventHandler - On begin request - http://localhost:8090/
2018-04-30 12:46:32,473 [5] XNuvem.Data.SessionFactoryHolder - Building session factory
2018-04-30 12:46:32,476 [5] XNuvem.Data.SessionFactoryHolder - Building configuration
2018-04-30 12:46:32,481 [5] XNuvem.Data.Providers.DefaultDataServiceProvider - Build database configuration
2018-04-30 12:46:32,483 [5] XNuvem.Data.Providers.SessionConfigurationCache - Get configuration cache
2018-04-30 12:46:32,521 [5] XNuvem.Data.Providers.SessionConfigurationCache - The cached NHibernate configuration is out of date. A new one will be re-generated.
2018-04-30 12:46:34,977 [5] XNuvem.Data.Providers.SessionConfigurationCache - Setting configuration cache
2018-04-30 12:46:35,379 [5] XNuvem.Data.Providers.DefaultDataServiceProvider - Done build database configuration
2018-04-30 12:46:35,453 [5] XNuvem.Data.SessionFactoryHolder - Done Building configuration
2018-04-30 12:46:36,408 [5] XNuvem.Data.SessionFactoryHolder - Done building session factory
2018-04-30 12:46:36,413 [5] XNuvem.Data.TransactionManager - Opening NHibernate session
2018-04-30 12:46:37,902 [5] XNuvem.Data.TransactionManager - Committing transaction
2018-04-30 12:46:37,921 [5] XNuvem.Data.TransactionManager - Disposing session
2018-04-30 12:46:37,986 [5] XNuvem.Environment.DefaultShellEventHandler - On end request - http://localhost:8090/
2018-04-30 12:46:38,035 [6] XNuvem.Environment.DefaultShellEventHandler - On begin request - http://localhost:8090/login?ReturnUrl=%2F
2018-04-30 12:46:38,050 [6] XNuvem.Data.SessionFactoryHolder - Building session factory
2018-04-30 12:46:38,056 [6] XNuvem.Data.SessionFactoryHolder - Building configuration
2018-04-30 12:46:38,063 [6] XNuvem.Data.Providers.DefaultDataServiceProvider - Build database configuration
2018-04-30 12:46:38,069 [6] XNuvem.Data.Providers.SessionConfigurationCache - Get configuration cache
2018-04-30 12:46:38,173 [6] XNuvem.Data.SessionFactoryHolder - Done Building configuration
2018-04-30 12:46:38,217 [6] XNuvem.Data.SessionFactoryHolder - Done building session factory
2018-04-30 12:46:38,223 [6] XNuvem.Data.TransactionManager - Opening NHibernate session
2018-04-30 12:46:44,415 [6] XNuvem.Data.TransactionManager - Committing transaction
2018-04-30 12:46:44,417 [6] XNuvem.Data.TransactionManager - Disposing session
2018-04-30 12:46:44,419 [6] XNuvem.Environment.DefaultShellEventHandler - On end request - http://localhost:8090/login?ReturnUrl=%2F
2018-04-30 12:54:54,188 [1] XNuvem.Environment.DefaultShellEventHandler - On application initialize
2018-04-30 12:54:54,544 [5] XNuvem.Environment.Configuration.ShellSettingsManager - Loading shell configurations
2018-04-30 12:54:54,744 [5] XNuvem.Environment.DefaultShellEventHandler - On begin request - http://localhost:8090/
2018-04-30 12:54:54,784 [5] XNuvem.Data.SessionFactoryHolder - Building session factory
2018-04-30 12:54:54,788 [5] XNuvem.Data.SessionFactoryHolder - Building configuration
2018-04-30 12:54:54,792 [5] XNuvem.Data.Providers.DefaultDataServiceProvider - Build database configuration
2018-04-30 12:54:54,796 [5] XNuvem.Data.Providers.SessionConfigurationCache - Get configuration cache
2018-04-30 12:54:54,808 [5] XNuvem.Data.Providers.SessionConfigurationCache - The cached NHibernate configuration is out of date. A new one will be re-generated.
2018-04-30 12:54:56,980 [5] XNuvem.Data.Providers.SessionConfigurationCache - Setting configuration cache
2018-04-30 12:54:57,216 [5] XNuvem.Data.Providers.DefaultDataServiceProvider - Done build database configuration
2018-04-30 12:54:57,220 [5] XNuvem.Data.SessionFactoryHolder - Done Building configuration
2018-04-30 12:54:57,760 [5] XNuvem.Data.SessionFactoryHolder - Done building session factory
2018-04-30 12:54:57,760 [5] XNuvem.Data.TransactionManager - Opening NHibernate session
2018-04-30 12:55:00,152 [5] XNuvem.Data.TransactionManager - Committing transaction
2018-04-30 12:55:00,458 [5] XNuvem.Data.TransactionManager - Disposing session
2018-04-30 12:55:00,542 [5] XNuvem.Environment.DefaultShellEventHandler - On end request - http://localhost:8090/
2018-04-30 12:55:00,574 [8] XNuvem.Environment.DefaultShellEventHandler - On begin request - http://localhost:8090/login?ReturnUrl=%2F
2018-04-30 12:55:00,578 [8] XNuvem.Data.SessionFactoryHolder - Building session factory
2018-04-30 12:55:00,582 [8] XNuvem.Data.SessionFactoryHolder - Building configuration
2018-04-30 12:55:00,586 [8] XNuvem.Data.Providers.DefaultDataServiceProvider - Build database configuration
2018-04-30 12:55:00,594 [8] XNuvem.Data.Providers.SessionConfigurationCache - Get configuration cache
2018-04-30 12:55:00,682 [8] XNuvem.Data.SessionFactoryHolder - Done Building configuration
2018-04-30 12:55:00,726 [8] XNuvem.Data.SessionFactoryHolder - Done building session factory
2018-04-30 12:55:00,730 [8] XNuvem.Data.TransactionManager - Opening NHibernate session
2018-04-30 12:55:06,523 [8] XNuvem.Data.TransactionManager - Committing transaction
2018-04-30 12:55:06,731 [8] XNuvem.Data.TransactionManager - Disposing session
2018-04-30 12:55:06,735 [8] XNuvem.Environment.DefaultShellEventHandler - On end request - http://localhost:8090/login?ReturnUrl=%2F
2018-04-30 12:55:42,110 [5] XNuvem.Environment.DefaultShellEventHandler - On begin request - http://localhost:8090/settingsinstall/install
2018-04-30 12:55:42,110 [5] XNuvem.Data.SessionFactoryHolder - Building session factory
2018-04-30 12:55:42,110 [5] XNuvem.Data.SessionFactoryHolder - Building configuration
2018-04-30 12:55:42,141 [5] XNuvem.Data.Providers.DefaultDataServiceProvider - Build database configuration
2018-04-30 12:55:42,141 [5] XNuvem.Data.Providers.SessionConfigurationCache - Get configuration cache
2018-04-30 12:55:42,202 [5] XNuvem.Data.SessionFactoryHolder - Done Building configuration
2018-04-30 12:55:42,246 [5] XNuvem.Data.SessionFactoryHolder - Done building session factory
2018-04-30 12:55:42,246 [5] XNuvem.Data.TransactionManager - Opening NHibernate session
2018-04-30 12:55:42,554 [5] XNuvem.Data.Providers.DefaultDataServiceProvider - Build database configuration
2018-04-30 12:55:42,570 [5] XNuvem.Data.Providers.SessionConfigurationCache - Get configuration cache
2018-04-30 12:55:44,297 [5] NHibernate.Tool.hbm2ddl.SchemaValidator - could not complete schema validation
NHibernate.HibernateException: Missing table: AGENDA
   em NHibernate.Cfg.Configuration.ValidateSchema(Dialect dialect, DatabaseMetadata databaseMetadata)
   em NHibernate.Tool.hbm2ddl.SchemaValidator.Validate()
2018-04-30 12:55:44,353 [5] XNuvem.Data.Schema.DefaultSchemaUpdate - Erro ao validar o schema
NHibernate.HibernateException: Missing table: AGENDA
   em NHibernate.Cfg.Configuration.ValidateSchema(Dialect dialect, DatabaseMetadata databaseMetadata)
   em NHibernate.Tool.hbm2ddl.SchemaValidator.Validate()
   em XNuvem.Data.Schema.DefaultSchemaUpdate.HasUpdates() na D:\Projetos\PETS\codigo\XNuvem.Framework\Data\Schema\DefaultSchemaUpdate.cs:linha 43
2018-04-30 12:55:49,678 [5] XNuvem.Data.TransactionManager - Committing transaction
2018-04-30 12:55:49,886 [5] XNuvem.Data.TransactionManager - Disposing session
2018-04-30 12:55:49,886 [5] XNuvem.Environment.DefaultShellEventHandler - On end request - http://localhost:8090/settingsinstall/install
2018-04-30 12:56:25,504 [10] XNuvem.Environment.DefaultShellEventHandler - On begin request - http://localhost:8090/settings/install/install
2018-04-30 12:56:25,508 [10] XNuvem.Data.SessionFactoryHolder - Building session factory
2018-04-30 12:56:25,512 [10] XNuvem.Data.SessionFactoryHolder - Building configuration
2018-04-30 12:56:25,512 [10] XNuvem.Data.Providers.DefaultDataServiceProvider - Build database configuration
2018-04-30 12:56:25,516 [10] XNuvem.Data.Providers.SessionConfigurationCache - Get configuration cache
2018-04-30 12:56:25,552 [10] XNuvem.Data.SessionFactoryHolder - Done Building configuration
2018-04-30 12:56:25,600 [10] XNuvem.Data.SessionFactoryHolder - Done building session factory
2018-04-30 12:56:25,604 [10] XNuvem.Data.TransactionManager - Opening NHibernate session
2018-04-30 12:56:25,932 [7] XNuvem.Data.Providers.DefaultDataServiceProvider - Build database configuration
2018-04-30 12:56:25,936 [7] XNuvem.Data.Providers.SessionConfigurationCache - Get configuration cache
2018-04-30 12:56:26,564 [7] NHibernate.Tool.hbm2ddl.SchemaValidator - could not complete schema validation
NHibernate.HibernateException: Missing table: AGENDA
   em NHibernate.Cfg.Configuration.ValidateSchema(Dialect dialect, DatabaseMetadata databaseMetadata)
   em NHibernate.Tool.hbm2ddl.SchemaValidator.Validate()
2018-04-30 12:56:26,600 [7] XNuvem.Data.Schema.DefaultSchemaUpdate - Erro ao validar o schema
NHibernate.HibernateException: Missing table: AGENDA
   em NHibernate.Cfg.Configuration.ValidateSchema(Dialect dialect, DatabaseMetadata databaseMetadata)
   em NHibernate.Tool.hbm2ddl.SchemaValidator.Validate()
   em XNuvem.Data.Schema.DefaultSchemaUpdate.HasUpdates() na D:\Projetos\PETS\codigo\XNuvem.Framework\Data\Schema\DefaultSchemaUpdate.cs:linha 43
2018-04-30 12:56:26,604 [7] XNuvem.Environment.Configuration.ShellSettingsManager - Storing configuration settings.
2018-04-30 12:56:26,620 [7] XNuvem.Data.Schema.DefaultSchemaUpdate - Start creating database
2018-04-30 12:56:26,624 [7] XNuvem.FileSystems.AppData.AppDataFolder - Deleting file "mappings.bin" from "App_Data" folder
2018-04-30 12:56:26,632 [7] XNuvem.Environment.Configuration.ShellSettingsManager - Loading shell configurations
2018-04-30 12:56:26,648 [7] XNuvem.Data.Providers.DefaultDataServiceProvider - Build database configuration
2018-04-30 12:56:26,660 [7] XNuvem.Data.Providers.SessionConfigurationCache - Get configuration cache
2018-04-30 12:56:26,760 [7] XNuvem.Data.Providers.SessionConfigurationCache - Setting configuration cache
2018-04-30 12:56:26,812 [7] XNuvem.Data.Providers.DefaultDataServiceProvider - Done build database configuration
2018-04-30 12:56:47,250 [7] NHibernate.Tool.hbm2ddl.SchemaExport - Unsuccessful: create table ESTOQUE (SQESTOQUE BIGINT not null, NULOTE NVARCHAR(100) not null, NUREMESSA NVARCHAR(100) not null, NUQUANTIDADE BIGINT not null, NUVALORUNITARIO DECIMAL(2, 7) not null, SQFORNECEDOR BIGINT not null, SQMATERIAL BIGINT not null, primary key (SQESTOQUE))
2018-04-30 12:56:47,250 [7] NHibernate.Tool.hbm2ddl.SchemaExport - The scale (7) for column 'NUVALORUNITARIO' must be within the range 0 to 2.
2018-04-30 12:56:47,250 [7] NHibernate.Tool.hbm2ddl.SchemaExport - The scale (7) for column 'NUVALORUNITARIO' must be within the range 0 to 2.
System.Data.SqlClient.SqlException (0x80131904): The scale (7) for column 'NUVALORUNITARIO' must be within the range 0 to 2.
   em System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   em System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   em System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   em System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   em System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   em System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   em System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   em NHibernate.Tool.hbm2ddl.SchemaExport.ExecuteSql(IDbCommand cmd, String sql)
   em NHibernate.Tool.hbm2ddl.SchemaExport.Execute(Action`1 scriptAction, Boolean execute, Boolean throwOnError, TextWriter exportOutput, IDbCommand statement, String sql)
   em NHibernate.Tool.hbm2ddl.SchemaExport.Execute(Action`1 scriptAction, Boolean execute, Boolean justDrop, IDbConnection connection, TextWriter exportOutput)
   em NHibernate.Tool.hbm2ddl.SchemaExport.Execute(Action`1 scriptAction, Boolean execute, Boolean justDrop, TextWriter exportOutput)
ClientConnectionId:ad07a6d4-ecad-46fb-acec-ffc5945657fb
Error Number:183,State:1,Class:15
2018-04-30 12:56:47,294 [7] XNuvem.Exceptions.DefaultPolicyException - Erro inesperado ao executar uma operação
NHibernate.HibernateException: The scale (7) for column 'NUVALORUNITARIO' must be within the range 0 to 2. ---> System.Data.SqlClient.SqlException: The scale (7) for column 'NUVALORUNITARIO' must be within the range 0 to 2.
   em System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   em System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   em System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   em System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   em System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   em System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   em System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   em NHibernate.Tool.hbm2ddl.SchemaExport.ExecuteSql(IDbCommand cmd, String sql)
   em NHibernate.Tool.hbm2ddl.SchemaExport.Execute(Action`1 scriptAction, Boolean execute, Boolean throwOnError, TextWriter exportOutput, IDbCommand statement, String sql)
   em NHibernate.Tool.hbm2ddl.SchemaExport.Execute(Action`1 scriptAction, Boolean execute, Boolean justDrop, IDbConnection connection, TextWriter exportOutput)
   em NHibernate.Tool.hbm2ddl.SchemaExport.Execute(Action`1 scriptAction, Boolean execute, Boolean justDrop, TextWriter exportOutput)
   --- Fim do rastreamento de pilha de exceções internas ---
   em NHibernate.Tool.hbm2ddl.SchemaExport.Execute(Action`1 scriptAction, Boolean execute, Boolean justDrop, TextWriter exportOutput)
   em NHibernate.Tool.hbm2ddl.SchemaExport.Execute(Boolean useStdOut, Boolean execute, Boolean justDrop)
   em NHibernate.Tool.hbm2ddl.SchemaExport.Create(Boolean useStdOut, Boolean execute)
   em XNuvem.Data.Schema.DefaultSchemaUpdate.CreateDatabase() na D:\Projetos\PETS\codigo\XNuvem.Framework\Data\Schema\DefaultSchemaUpdate.cs:linha 61
   em XNuvem.Web.Controllers.SettingsInstallController.<Install>d__10.MoveNext() na D:\Projetos\PETS\codigo\XNuvem.Web\Controllers\SettingsInstallController.cs:linha 61
--- Fim do rastreamento de pilha do local anterior onde a exceção foi gerada ---
   em System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   em System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   em System.Web.Mvc.Async.TaskAsyncActionDescriptor.EndExecute(IAsyncResult asyncResult)
   em System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass8_0.<BeginInvokeAsynchronousActionMethod>b__1(IAsyncResult asyncResult)
   em System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   em System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   em System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   em System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__11_0()
   em System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass11_1.<InvokeActionMethodFilterAsynchronouslyRecursive>b__2()
   em System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass7_0.<BeginInvokeActionMethodWithFilters>b__1(IAsyncResult asyncResult)
   em System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   em System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   em System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   em System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_6.<BeginInvokeAction>b__3()
   em System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_1.<BeginInvokeAction>b__5(IAsyncResult asyncResult)
2018-04-30 12:56:47,302 [7] XNuvem.Exceptions.DefaultPolicyException - Canceling transaction due to an error
2018-04-30 12:56:47,302 [7] XNuvem.Data.TransactionManager - Rolling back transaction
2018-04-30 12:56:47,554 [7] XNuvem.Data.TransactionManager - Disposing session
2018-04-30 12:56:50,698 [7] XNuvem.Environment.DefaultShellEventHandler - On end request - http://localhost:8090/settings/install/install
2018-04-30 12:58:29,706 [1] XNuvem.Environment.DefaultShellEventHandler - On application initialize
2018-04-30 12:58:29,930 [5] XNuvem.Environment.Configuration.ShellSettingsManager - Loading shell configurations
2018-04-30 12:58:30,098 [5] XNuvem.Environment.DefaultShellEventHandler - On begin request - http://localhost:8090/
2018-04-30 12:58:30,130 [5] XNuvem.Data.SessionFactoryHolder - Building session factory
2018-04-30 12:58:30,134 [5] XNuvem.Data.SessionFactoryHolder - Building configuration
2018-04-30 12:58:30,138 [5] XNuvem.Data.Providers.DefaultDataServiceProvider - Build database configuration
2018-04-30 12:58:30,141 [5] XNuvem.Data.Providers.SessionConfigurationCache - Get configuration cache
2018-04-30 12:58:30,153 [5] XNuvem.Data.Providers.SessionConfigurationCache - The cached NHibernate configuration is out of date. A new one will be re-generated.
2018-04-30 12:58:31,981 [5] XNuvem.Data.Providers.SessionConfigurationCache - Setting configuration cache
2018-04-30 12:58:32,181 [5] XNuvem.Data.Providers.DefaultDataServiceProvider - Done build database configuration
2018-04-30 12:58:32,185 [5] XNuvem.Data.SessionFactoryHolder - Done Building configuration
2018-04-30 12:58:32,913 [5] XNuvem.Data.SessionFactoryHolder - Done building session factory
2018-04-30 12:58:32,913 [5] XNuvem.Data.TransactionManager - Opening NHibernate session
2018-04-30 12:58:35,440 [5] XNuvem.Data.TransactionManager - Committing transaction
2018-04-30 12:58:35,760 [5] XNuvem.Data.TransactionManager - Disposing session
2018-04-30 12:58:35,812 [5] XNuvem.Environment.DefaultShellEventHandler - On end request - http://localhost:8090/
2018-04-30 12:58:35,840 [6] XNuvem.Environment.DefaultShellEventHandler - On begin request - http://localhost:8090/login?ReturnUrl=%2F
2018-04-30 12:58:35,848 [6] XNuvem.Data.SessionFactoryHolder - Building session factory
2018-04-30 12:58:35,864 [6] XNuvem.Data.SessionFactoryHolder - Building configuration
2018-04-30 12:58:35,868 [6] XNuvem.Data.Providers.DefaultDataServiceProvider - Build database configuration
2018-04-30 12:58:35,876 [6] XNuvem.Data.Providers.SessionConfigurationCache - Get configuration cache
2018-04-30 12:58:35,984 [6] XNuvem.Data.SessionFactoryHolder - Done Building configuration
2018-04-30 12:58:36,024 [6] XNuvem.Data.SessionFactoryHolder - Done building session factory
2018-04-30 12:58:36,028 [6] XNuvem.Data.TransactionManager - Opening NHibernate session
2018-04-30 12:58:42,302 [6] XNuvem.Data.TransactionManager - Committing transaction
2018-04-30 12:58:42,554 [6] XNuvem.Data.TransactionManager - Disposing session
2018-04-30 12:58:42,562 [6] XNuvem.Environment.DefaultShellEventHandler - On end request - http://localhost:8090/login?ReturnUrl=%2F
2018-04-30 12:59:28,174 [5] XNuvem.Environment.DefaultShellEventHandler - On begin request - http://localhost:8090/login?ReturnUrl=%2F
2018-04-30 12:59:28,182 [5] XNuvem.Data.SessionFactoryHolder - Building session factory
2018-04-30 12:59:28,206 [5] XNuvem.Data.SessionFactoryHolder - Building configuration
2018-04-30 12:59:28,210 [5] XNuvem.Data.Providers.DefaultDataServiceProvider - Build database configuration
2018-04-30 12:59:28,214 [5] XNuvem.Data.Providers.SessionConfigurationCache - Get configuration cache
2018-04-30 12:59:28,266 [5] XNuvem.Data.SessionFactoryHolder - Done Building configuration
2018-04-30 12:59:28,338 [5] XNuvem.Data.SessionFactoryHolder - Done building session factory
2018-04-30 12:59:28,338 [5] XNuvem.Data.TransactionManager - Opening NHibernate session
2018-04-30 12:59:29,866 [8] NHibernate.Impl.MultiQueryImpl - Failed to execute multi query: [select user0_.Id as Id1_26_0_, identityro2_.Id as Id1_24_1_, user0_.AccessFailedCount as Acces3_26_0_, user0_.Email as Email4_26_0_, user0_.EmailConfirmed as Email5_26_0_, user0_.LockoutEnabled as Locko6_26_0_, user0_.LockoutEndDateUtc as Locko7_26_0_, user0_.PasswordHash as Passw8_26_0_, user0_.PhoneNumber as Phone9_26_0_, user0_.PhoneNumberConfirmed as Phon10_26_0_, user0_.TwoFactorEnabled as TwoF11_26_0_, user0_.UserName as User12_26_0_, user0_.SecurityStamp as Secu13_26_0_, user0_.FullName as Full14_26_0_, user0_.SlpCode as SlpC15_26_0_, user0_.SlpName as SlpN16_26_0_, user0_.QryGroup60 as QryG17_26_0_, user0_.QryGroup61 as QryG18_26_0_, user0_.QryGroup62 as QryG19_26_0_, identityro2_.Name as Name2_24_1_, roles1_.IdentityUserCode as Ident2_25_0__, roles1_.IdentityRoleCode as Ident1_25_0__ from AspNetUsers user0_ left outer join AspNetUserRoles roles1_ on user0_.Id=roles1_.IdentityUserCode left outer join AspNetRoles identityro2_ on roles1_.IdentityRoleCode=identityro2_.Id where user0_.ClassType='User' and upper(user0_.UserName)=?;
select user0_.Id as Id1_26_0_, claims1_.Id as Id1_23_1_, user0_.AccessFailedCount as Acces3_26_0_, user0_.Email as Email4_26_0_, user0_.EmailConfirmed as Email5_26_0_, user0_.LockoutEnabled as Locko6_26_0_, user0_.LockoutEndDateUtc as Locko7_26_0_, user0_.PasswordHash as Passw8_26_0_, user0_.PhoneNumber as Phone9_26_0_, user0_.PhoneNumberConfirmed as Phon10_26_0_, user0_.TwoFactorEnabled as TwoF11_26_0_, user0_.UserName as User12_26_0_, user0_.SecurityStamp as Secu13_26_0_, user0_.FullName as Full14_26_0_, user0_.SlpCode as SlpC15_26_0_, user0_.SlpName as SlpN16_26_0_, user0_.QryGroup60 as QryG17_26_0_, user0_.QryGroup61 as QryG18_26_0_, user0_.QryGroup62 as QryG19_26_0_, claims1_.ClaimType as Claim2_23_1_, claims1_.ClaimValue as Claim3_23_1_, claims1_.IdentityUserCode as Ident4_23_1_, claims1_.IdentityUserCode as Ident4_23_0__, claims1_.Id as Id1_23_0__ from AspNetUsers user0_ left outer join AspNetUserClaims claims1_ on user0_.Id=claims1_.IdentityUserCode where user0_.ClassType='User' and upper(user0_.UserName)=?;
select user0_.Id as Id1_26_, user0_.AccessFailedCount as Acces3_26_, user0_.Email as Email4_26_, user0_.EmailConfirmed as Email5_26_, user0_.LockoutEnabled as Locko6_26_, user0_.LockoutEndDateUtc as Locko7_26_, user0_.PasswordHash as Passw8_26_, user0_.PhoneNumber as Phone9_26_, user0_.PhoneNumberConfirmed as Phon10_26_, user0_.TwoFactorEnabled as TwoF11_26_, user0_.UserName as User12_26_, user0_.SecurityStamp as Secu13_26_, user0_.FullName as Full14_26_, user0_.SlpCode as SlpC15_26_, user0_.SlpName as SlpN16_26_, user0_.QryGroup60 as QryG17_26_, user0_.QryGroup61 as QryG18_26_, user0_.QryGroup62 as QryG19_26_, logins1_.IdentityUserCode as Ident1_27_0__, logins1_.LoginProvider as Login2_27_0__, logins1_.ProviderKey as Provi3_27_0__ from AspNetUsers user0_ left outer join Logins logins1_ on user0_.Id=logins1_.IdentityUserCode where user0_.ClassType='User' and upper(user0_.UserName)=?;
select user0_.Id as Id1_26_, user0_.AccessFailedCount as Acces3_26_, user0_.Email as Email4_26_, user0_.EmailConfirmed as Email5_26_, user0_.LockoutEnabled as Locko6_26_, user0_.LockoutEndDateUtc as Locko7_26_, user0_.PasswordHash as Passw8_26_, user0_.PhoneNumber as Phone9_26_, user0_.PhoneNumberConfirmed as Phon10_26_, user0_.TwoFactorEnabled as TwoF11_26_, user0_.UserName as User12_26_, user0_.SecurityStamp as Secu13_26_, user0_.FullName as Full14_26_, user0_.SlpCode as SlpC15_26_, user0_.SlpName as SlpN16_26_, user0_.QryGroup60 as QryG17_26_, user0_.QryGroup61 as QryG18_26_, user0_.QryGroup62 as QryG19_26_ from AspNetUsers user0_ where user0_.ClassType='User' and upper(user0_.UserName)=?;
]
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'AspNetUsers'.
Statement(s) could not be prepared.
   em System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   em System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   em System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   em System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   em System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   em System.Data.SqlClient.SqlDataReader.get_MetaData()
   em System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption)
   em System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   em System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   em System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   em System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   em System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   em System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader()
   em NHibernate.AdoNet.AbstractBatcher.ExecuteReader(IDbCommand cmd)
   em NHibernate.Driver.BatcherDataReaderWrapper..ctor(IBatcher batcher, IDbCommand command)
   em NHibernate.Driver.BasicResultSetsCommand.GetReader(Nullable`1 commandTimeout)
   em NHibernate.Impl.MultiQueryImpl.DoList()
ClientConnectionId:ded3ea0f-df55-4cab-9033-14ef252a70f6
Error Number:208,State:1,Class:16
2018-04-30 12:59:29,954 [5] XNuvem.Exceptions.DefaultPolicyException - Erro inesperado ao executar uma operação
NHibernate.Exceptions.GenericADOException: Failed to execute multi query[SQL: select user0_.Id as Id1_26_0_, identityro2_.Id as Id1_24_1_, user0_.AccessFailedCount as Acces3_26_0_, user0_.Email as Email4_26_0_, user0_.EmailConfirmed as Email5_26_0_, user0_.LockoutEnabled as Locko6_26_0_, user0_.LockoutEndDateUtc as Locko7_26_0_, user0_.PasswordHash as Passw8_26_0_, user0_.PhoneNumber as Phone9_26_0_, user0_.PhoneNumberConfirmed as Phon10_26_0_, user0_.TwoFactorEnabled as TwoF11_26_0_, user0_.UserName as User12_26_0_, user0_.SecurityStamp as Secu13_26_0_, user0_.FullName as Full14_26_0_, user0_.SlpCode as SlpC15_26_0_, user0_.SlpName as SlpN16_26_0_, user0_.QryGroup60 as QryG17_26_0_, user0_.QryGroup61 as QryG18_26_0_, user0_.QryGroup62 as QryG19_26_0_, identityro2_.Name as Name2_24_1_, roles1_.IdentityUserCode as Ident2_25_0__, roles1_.IdentityRoleCode as Ident1_25_0__ from AspNetUsers user0_ left outer join AspNetUserRoles roles1_ on user0_.Id=roles1_.IdentityUserCode left outer join AspNetRoles identityro2_ on roles1_.IdentityRoleCode=identityro2_.Id where user0_.ClassType='User' and upper(user0_.UserName)=?;
select user0_.Id as Id1_26_0_, claims1_.Id as Id1_23_1_, user0_.AccessFailedCount as Acces3_26_0_, user0_.Email as Email4_26_0_, user0_.EmailConfirmed as Email5_26_0_, user0_.LockoutEnabled as Locko6_26_0_, user0_.LockoutEndDateUtc as Locko7_26_0_, user0_.PasswordHash as Passw8_26_0_, user0_.PhoneNumber as Phone9_26_0_, user0_.PhoneNumberConfirmed as Phon10_26_0_, user0_.TwoFactorEnabled as TwoF11_26_0_, user0_.UserName as User12_26_0_, user0_.SecurityStamp as Secu13_26_0_, user0_.FullName as Full14_26_0_, user0_.SlpCode as SlpC15_26_0_, user0_.SlpName as SlpN16_26_0_, user0_.QryGroup60 as QryG17_26_0_, user0_.QryGroup61 as QryG18_26_0_, user0_.QryGroup62 as QryG19_26_0_, claims1_.ClaimType as Claim2_23_1_, claims1_.ClaimValue as Claim3_23_1_, claims1_.IdentityUserCode as Ident4_23_1_, claims1_.IdentityUserCode as Ident4_23_0__, claims1_.Id as Id1_23_0__ from AspNetUsers user0_ left outer join AspNetUserClaims claims1_ on user0_.Id=claims1_.IdentityUserCode where user0_.ClassType='User' and upper(user0_.UserName)=?;
select user0_.Id as Id1_26_, user0_.AccessFailedCount as Acces3_26_, user0_.Email as Email4_26_, user0_.EmailConfirmed as Email5_26_, user0_.LockoutEnabled as Locko6_26_, user0_.LockoutEndDateUtc as Locko7_26_, user0_.PasswordHash as Passw8_26_, user0_.PhoneNumber as Phone9_26_, user0_.PhoneNumberConfirmed as Phon10_26_, user0_.TwoFactorEnabled as TwoF11_26_, user0_.UserName as User12_26_, user0_.SecurityStamp as Secu13_26_, user0_.FullName as Full14_26_, user0_.SlpCode as SlpC15_26_, user0_.SlpName as SlpN16_26_, user0_.QryGroup60 as QryG17_26_, user0_.QryGroup61 as QryG18_26_, user0_.QryGroup62 as QryG19_26_, logins1_.IdentityUserCode as Ident1_27_0__, logins1_.LoginProvider as Login2_27_0__, logins1_.ProviderKey as Provi3_27_0__ from AspNetUsers user0_ left outer join Logins logins1_ on user0_.Id=logins1_.IdentityUserCode where user0_.ClassType='User' and upper(user0_.UserName)=?;
select user0_.Id as Id1_26_, user0_.AccessFailedCount as Acces3_26_, user0_.Email as Email4_26_, user0_.EmailConfirmed as Email5_26_, user0_.LockoutEnabled as Locko6_26_, user0_.LockoutEndDateUtc as Locko7_26_, user0_.PasswordHash as Passw8_26_, user0_.PhoneNumber as Phone9_26_, user0_.PhoneNumberConfirmed as Phon10_26_, user0_.TwoFactorEnabled as TwoF11_26_, user0_.UserName as User12_26_, user0_.SecurityStamp as Secu13_26_, user0_.FullName as Full14_26_, user0_.SlpCode as SlpC15_26_, user0_.SlpName as SlpN16_26_, user0_.QryGroup60 as QryG17_26_, user0_.QryGroup61 as QryG18_26_, user0_.QryGroup62 as QryG19_26_ from AspNetUsers user0_ where user0_.ClassType='User' and upper(user0_.UserName)=?;
] ---> System.Data.SqlClient.SqlException: Invalid object name 'AspNetUsers'.
Statement(s) could not be prepared.
   em System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   em System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   em System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   em System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   em System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   em System.Data.SqlClient.SqlDataReader.get_MetaData()
   em System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption)
   em System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   em System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   em System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   em System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   em System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   em System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader()
   em NHibernate.AdoNet.AbstractBatcher.ExecuteReader(IDbCommand cmd)
   em NHibernate.Driver.BatcherDataReaderWrapper..ctor(IBatcher batcher, IDbCommand command)
   em NHibernate.Driver.BasicResultSetsCommand.GetReader(Nullable`1 commandTimeout)
   em NHibernate.Impl.MultiQueryImpl.DoList()
   --- Fim do rastreamento de pilha de exceções internas ---
   em NHibernate.Impl.MultiQueryImpl.DoList()
   em NHibernate.Impl.MultiQueryImpl.List()
   em NHibernate.Impl.FutureQueryBatch.GetResultsFrom(IMultiQuery multiApproach)
   em NHibernate.Impl.FutureBatch`2.GetResults()
   em NHibernate.Impl.FutureBatch`2.GetCurrentResult[TResult](Int32 currentIndex)
   em NHibernate.Impl.FutureBatch`2.<>c__DisplayClass13_0`1.<GetEnumerator>b__0()
   em NHibernate.Impl.DelayedEnumerator`1.<get_Enumerable>d__8.MoveNext()
   em System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
   em NHibernate.AspNet.Identity.UserStore`1.<>c__DisplayClass1d.<GetUserAggregateAsync>b__1c()
   em System.Threading.Tasks.Task`1.InnerInvoke()
   em System.Threading.Tasks.Task.Execute()
--- Fim do rastreamento de pilha do local anterior onde a exceção foi gerada ---
   em System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   em System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   em Microsoft.AspNet.Identity.TaskExtensions.CultureAwaiter`1.GetResult()
   em Microsoft.AspNet.Identity.Owin.SignInManager`2.<PasswordSignInAsync>d__29.MoveNext()
--- Fim do rastreamento de pilha do local anterior onde a exceção foi gerada ---
   em System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   em System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   em System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   em XNuvem.Security.XNuvemSignInService.<XNuvem-Security-ISignInService-PasswordSignInAsync>d__10.MoveNext() na D:\Projetos\PETS\codigo\XNuvem.Framework\Security\XNuvemSignInService.cs:linha 40
--- Fim do rastreamento de pilha do local anterior onde a exceção foi gerada ---
   em System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   em System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   em System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   em XNuvem.Web.Controllers.AccountController.<Login>d__6.MoveNext() na D:\Projetos\PETS\codigo\XNuvem.Web\Controllers\AccountController.cs:linha 55
--- Fim do rastreamento de pilha do local anterior onde a exceção foi gerada ---
   em System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   em System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   em System.Web.Mvc.Async.TaskAsyncActionDescriptor.EndExecute(IAsyncResult asyncResult)
   em System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass8_0.<BeginInvokeAsynchronousActionMethod>b__1(IAsyncResult asyncResult)
   em System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   em System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   em System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   em System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__11_0()
   em System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass11_1.<InvokeActionMethodFilterAsynchronouslyRecursive>b__2()
   em System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass7_0.<BeginInvokeActionMethodWithFilters>b__1(IAsyncResult asyncResult)
   em System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   em System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   em System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   em System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_6.<BeginInvokeAction>b__3()
   em System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_1.<BeginInvokeAction>b__5(IAsyncResult asyncResult)
2018-04-30 12:59:29,970 [5] XNuvem.Exceptions.DefaultPolicyException - Canceling transaction due to an error
2018-04-30 12:59:29,974 [5] XNuvem.Data.TransactionManager - Rolling back transaction
2018-04-30 12:59:30,174 [5] XNuvem.Data.TransactionManager - Disposing session
2018-04-30 12:59:34,995 [6] XNuvem.Environment.DefaultShellEventHandler - On end request - http://localhost:8090/login?ReturnUrl=%2F
2018-04-30 13:00:51,186 [6] XNuvem.Environment.DefaultShellEventHandler - On begin request - http://localhost:8090/settingsinstall/install
2018-04-30 13:00:51,190 [6] XNuvem.Data.SessionFactoryHolder - Building session factory
2018-04-30 13:00:51,202 [6] XNuvem.Data.SessionFactoryHolder - Building configuration
2018-04-30 13:00:51,226 [6] XNuvem.Data.Providers.DefaultDataServiceProvider - Build database configuration
2018-04-30 13:00:51,234 [6] XNuvem.Data.Providers.SessionConfigurationCache - Get configuration cache
2018-04-30 13:00:51,278 [6] XNuvem.Data.SessionFactoryHolder - Done Building configuration
2018-04-30 13:00:51,326 [6] XNuvem.Data.SessionFactoryHolder - Done building session factory
2018-04-30 13:00:51,330 [6] XNuvem.Data.TransactionManager - Opening NHibernate session
2018-04-30 13:00:51,558 [6] XNuvem.Data.Providers.DefaultDataServiceProvider - Build database configuration
2018-04-30 13:00:51,562 [6] XNuvem.Data.Providers.SessionConfigurationCache - Get configuration cache
2018-04-30 13:00:57,619 [6] NHibernate.Tool.hbm2ddl.SchemaValidator - could not complete schema validation
NHibernate.HibernateException: Missing table: ESTOQUE
   em NHibernate.Cfg.Configuration.ValidateSchema(Dialect dialect, DatabaseMetadata databaseMetadata)
   em NHibernate.Tool.hbm2ddl.SchemaValidator.Validate()
2018-04-30 13:00:57,703 [6] XNuvem.Data.Schema.DefaultSchemaUpdate - Erro ao validar o schema
NHibernate.HibernateException: Missing table: ESTOQUE
   em NHibernate.Cfg.Configuration.ValidateSchema(Dialect dialect, DatabaseMetadata databaseMetadata)
   em NHibernate.Tool.hbm2ddl.SchemaValidator.Validate()
   em XNuvem.Data.Schema.DefaultSchemaUpdate.HasUpdates() na D:\Projetos\PETS\codigo\XNuvem.Framework\Data\Schema\DefaultSchemaUpdate.cs:linha 43
2018-04-30 13:00:59,351 [6] XNuvem.Data.TransactionManager - Committing transaction
2018-04-30 13:00:59,687 [6] XNuvem.Data.TransactionManager - Disposing session
2018-04-30 13:00:59,691 [6] XNuvem.Environment.DefaultShellEventHandler - On end request - http://localhost:8090/settingsinstall/install
2018-04-30 13:01:28,838 [5] XNuvem.Environment.DefaultShellEventHandler - On begin request - http://localhost:8090/settings/install/install
2018-04-30 13:01:28,842 [5] XNuvem.Data.SessionFactoryHolder - Building session factory
2018-04-30 13:01:28,850 [5] XNuvem.Data.SessionFactoryHolder - Building configuration
2018-04-30 13:01:28,850 [5] XNuvem.Data.Providers.DefaultDataServiceProvider - Build database configuration
2018-04-30 13:01:28,854 [5] XNuvem.Data.Providers.SessionConfigurationCache - Get configuration cache
2018-04-30 13:01:28,882 [5] XNuvem.Data.SessionFactoryHolder - Done Building configuration
2018-04-30 13:01:28,922 [5] XNuvem.Data.SessionFactoryHolder - Done building session factory
2018-04-30 13:01:28,926 [5] XNuvem.Data.TransactionManager - Opening NHibernate session
2018-04-30 13:01:29,190 [6] XNuvem.Data.Providers.DefaultDataServiceProvider - Build database configuration
2018-04-30 13:01:29,194 [6] XNuvem.Data.Providers.SessionConfigurationCache - Get configuration cache
2018-04-30 13:01:34,590 [6] NHibernate.Tool.hbm2ddl.SchemaValidator - could not complete schema validation
NHibernate.HibernateException: Missing table: ESTOQUE
   em NHibernate.Cfg.Configuration.ValidateSchema(Dialect dialect, DatabaseMetadata databaseMetadata)
   em NHibernate.Tool.hbm2ddl.SchemaValidator.Validate()
2018-04-30 13:01:34,674 [6] XNuvem.Data.Schema.DefaultSchemaUpdate - Erro ao validar o schema
NHibernate.HibernateException: Missing table: ESTOQUE
   em NHibernate.Cfg.Configuration.ValidateSchema(Dialect dialect, DatabaseMetadata databaseMetadata)
   em NHibernate.Tool.hbm2ddl.SchemaValidator.Validate()
   em XNuvem.Data.Schema.DefaultSchemaUpdate.HasUpdates() na D:\Projetos\PETS\codigo\XNuvem.Framework\Data\Schema\DefaultSchemaUpdate.cs:linha 43
2018-04-30 13:01:34,678 [6] XNuvem.Environment.Configuration.ShellSettingsManager - Storing configuration settings.
2018-04-30 13:01:34,698 [6] XNuvem.Data.Schema.DefaultSchemaUpdate - Start creating database
2018-04-30 13:01:34,698 [6] XNuvem.FileSystems.AppData.AppDataFolder - Deleting file "mappings.bin" from "App_Data" folder
2018-04-30 13:01:34,706 [6] XNuvem.Environment.Configuration.ShellSettingsManager - Loading shell configurations
2018-04-30 13:01:34,726 [6] XNuvem.Data.Providers.DefaultDataServiceProvider - Build database configuration
2018-04-30 13:01:34,730 [6] XNuvem.Data.Providers.SessionConfigurationCache - Get configuration cache
2018-04-30 13:01:34,886 [6] XNuvem.Data.Providers.SessionConfigurationCache - Setting configuration cache
2018-04-30 13:01:34,942 [6] XNuvem.Data.Providers.DefaultDataServiceProvider - Done build database configuration
2018-04-30 13:01:58,345 [6] NHibernate.Tool.hbm2ddl.SchemaExport - Unsuccessful: create table MOVIMENTACAO (SQMOVIMENTACAO BIGINT not null, QTQUANTIDADE BIGINT null, VLVALOR DECIMAL(2, 7) not null, VLDESCONTO DECIMAL(2, 7) null, SQSERVICO BIGINT null, SQESTOQUE BIGINT null, SQCAIXA BIGINT null, primary key (SQMOVIMENTACAO))
2018-04-30 13:01:58,349 [6] NHibernate.Tool.hbm2ddl.SchemaExport - The scale (7) for column 'VLVALOR' must be within the range 0 to 2.
2018-04-30 13:01:58,349 [6] NHibernate.Tool.hbm2ddl.SchemaExport - The scale (7) for column 'VLVALOR' must be within the range 0 to 2.
System.Data.SqlClient.SqlException (0x80131904): The scale (7) for column 'VLVALOR' must be within the range 0 to 2.
   em System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   em System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   em System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   em System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   em System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   em System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   em System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   em NHibernate.Tool.hbm2ddl.SchemaExport.ExecuteSql(IDbCommand cmd, String sql)
   em NHibernate.Tool.hbm2ddl.SchemaExport.Execute(Action`1 scriptAction, Boolean execute, Boolean throwOnError, TextWriter exportOutput, IDbCommand statement, String sql)
   em NHibernate.Tool.hbm2ddl.SchemaExport.Execute(Action`1 scriptAction, Boolean execute, Boolean justDrop, IDbConnection connection, TextWriter exportOutput)
   em NHibernate.Tool.hbm2ddl.SchemaExport.Execute(Action`1 scriptAction, Boolean execute, Boolean justDrop, TextWriter exportOutput)
ClientConnectionId:f52025b5-5cd8-4824-bd33-2d00887923f3
Error Number:183,State:1,Class:15
2018-04-30 13:01:58,405 [6] XNuvem.Exceptions.DefaultPolicyException - Erro inesperado ao executar uma operação
NHibernate.HibernateException: The scale (7) for column 'VLVALOR' must be within the range 0 to 2. ---> System.Data.SqlClient.SqlException: The scale (7) for column 'VLVALOR' must be within the range 0 to 2.
   em System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   em System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   em System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   em System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   em System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   em System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   em System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   em NHibernate.Tool.hbm2ddl.SchemaExport.ExecuteSql(IDbCommand cmd, String sql)
   em NHibernate.Tool.hbm2ddl.SchemaExport.Execute(Action`1 scriptAction, Boolean execute, Boolean throwOnError, TextWriter exportOutput, IDbCommand statement, String sql)
   em NHibernate.Tool.hbm2ddl.SchemaExport.Execute(Action`1 scriptAction, Boolean execute, Boolean justDrop, IDbConnection connection, TextWriter exportOutput)
   em NHibernate.Tool.hbm2ddl.SchemaExport.Execute(Action`1 scriptAction, Boolean execute, Boolean justDrop, TextWriter exportOutput)
   --- Fim do rastreamento de pilha de exceções internas ---
   em NHibernate.Tool.hbm2ddl.SchemaExport.Execute(Action`1 scriptAction, Boolean execute, Boolean justDrop, TextWriter exportOutput)
   em NHibernate.Tool.hbm2ddl.SchemaExport.Execute(Boolean useStdOut, Boolean execute, Boolean justDrop)
   em NHibernate.Tool.hbm2ddl.SchemaExport.Create(Boolean useStdOut, Boolean execute)
   em XNuvem.Data.Schema.DefaultSchemaUpdate.CreateDatabase() na D:\Projetos\PETS\codigo\XNuvem.Framework\Data\Schema\DefaultSchemaUpdate.cs:linha 61
   em XNuvem.Web.Controllers.SettingsInstallController.<Install>d__10.MoveNext() na D:\Projetos\PETS\codigo\XNuvem.Web\Controllers\SettingsInstallController.cs:linha 61
--- Fim do rastreamento de pilha do local anterior onde a exceção foi gerada ---
   em System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   em System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   em System.Web.Mvc.Async.TaskAsyncActionDescriptor.EndExecute(IAsyncResult asyncResult)
   em System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass8_0.<BeginInvokeAsynchronousActionMethod>b__1(IAsyncResult asyncResult)
   em System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   em System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   em System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   em System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__11_0()
   em System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass11_1.<InvokeActionMethodFilterAsynchronouslyRecursive>b__2()
   em System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass7_0.<BeginInvokeActionMethodWithFilters>b__1(IAsyncResult asyncResult)
   em System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   em System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   em System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   em System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_6.<BeginInvokeAction>b__3()
   em System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_1.<BeginInvokeAction>b__5(IAsyncResult asyncResult)
2018-04-30 13:01:58,413 [6] XNuvem.Exceptions.DefaultPolicyException - Canceling transaction due to an error
2018-04-30 13:01:58,413 [6] XNuvem.Data.TransactionManager - Rolling back transaction
2018-04-30 13:01:58,865 [6] XNuvem.Data.TransactionManager - Disposing session
2018-04-30 13:01:58,877 [6] XNuvem.Environment.DefaultShellEventHandler - On end request - http://localhost:8090/settings/install/install
2018-04-30 13:11:07,714 [1] XNuvem.Environment.DefaultShellEventHandler - On application initialize
2018-04-30 13:11:07,926 [5] XNuvem.Environment.Configuration.ShellSettingsManager - Loading shell configurations
2018-04-30 13:11:08,058 [5] XNuvem.Environment.DefaultShellEventHandler - On begin request - http://localhost:8090/
2018-04-30 13:11:08,098 [5] XNuvem.Data.SessionFactoryHolder - Building session factory
2018-04-30 13:11:08,102 [5] XNuvem.Data.SessionFactoryHolder - Building configuration
2018-04-30 13:11:08,106 [5] XNuvem.Data.Providers.DefaultDataServiceProvider - Build database configuration
2018-04-30 13:11:08,110 [5] XNuvem.Data.Providers.SessionConfigurationCache - Get configuration cache
2018-04-30 13:11:08,122 [5] XNuvem.Data.Providers.SessionConfigurationCache - The cached NHibernate configuration is out of date. A new one will be re-generated.
2018-04-30 13:11:09,791 [5] XNuvem.Data.Providers.SessionConfigurationCache - Setting configuration cache
2018-04-30 13:11:09,983 [5] XNuvem.Data.Providers.DefaultDataServiceProvider - Done build database configuration
2018-04-30 13:11:09,987 [5] XNuvem.Data.SessionFactoryHolder - Done Building configuration
2018-04-30 13:11:10,639 [5] XNuvem.Data.SessionFactoryHolder - Done building session factory
2018-04-30 13:11:10,639 [5] XNuvem.Data.TransactionManager - Opening NHibernate session
2018-04-30 13:11:13,010 [5] XNuvem.Data.TransactionManager - Committing transaction
2018-04-30 13:11:13,270 [5] XNuvem.Data.TransactionManager - Disposing session
2018-04-30 13:11:13,334 [5] XNuvem.Environment.DefaultShellEventHandler - On end request - http://localhost:8090/
2018-04-30 13:11:13,378 [6] XNuvem.Environment.DefaultShellEventHandler - On begin request - http://localhost:8090/login?ReturnUrl=%2F
2018-04-30 13:11:13,402 [6] XNuvem.Data.SessionFactoryHolder - Building session factory
2018-04-30 13:11:13,406 [6] XNuvem.Data.SessionFactoryHolder - Building configuration
2018-04-30 13:11:13,414 [6] XNuvem.Data.Providers.DefaultDataServiceProvider - Build database configuration
2018-04-30 13:11:13,426 [6] XNuvem.Data.Providers.SessionConfigurationCache - Get configuration cache
2018-04-30 13:11:13,550 [6] XNuvem.Data.SessionFactoryHolder - Done Building configuration
2018-04-30 13:11:13,610 [6] XNuvem.Data.SessionFactoryHolder - Done building session factory
2018-04-30 13:11:13,614 [6] XNuvem.Data.TransactionManager - Opening NHibernate session
2018-04-30 13:11:18,859 [6] XNuvem.Data.TransactionManager - Committing transaction
2018-04-30 13:11:19,071 [6] XNuvem.Data.TransactionManager - Disposing session
2018-04-30 13:11:19,075 [6] XNuvem.Environment.DefaultShellEventHandler - On end request - http://localhost:8090/login?ReturnUrl=%2F
2018-04-30 13:11:33,679 [5] XNuvem.Environment.DefaultShellEventHandler - On begin request - http://localhost:8090/settingsinstall/install
2018-04-30 13:11:33,687 [5] XNuvem.Data.SessionFactoryHolder - Building session factory
2018-04-30 13:11:33,691 [5] XNuvem.Data.SessionFactoryHolder - Building configuration
2018-04-30 13:11:33,695 [5] XNuvem.Data.Providers.DefaultDataServiceProvider - Build database configuration
2018-04-30 13:11:33,695 [5] XNuvem.Data.Providers.SessionConfigurationCache - Get configuration cache
2018-04-30 13:11:33,747 [5] XNuvem.Data.SessionFactoryHolder - Done Building configuration
2018-04-30 13:11:33,787 [5] XNuvem.Data.SessionFactoryHolder - Done building session factory
2018-04-30 13:11:33,791 [5] XNuvem.Data.TransactionManager - Opening NHibernate session
2018-04-30 13:11:34,067 [5] XNuvem.Data.Providers.DefaultDataServiceProvider - Build database configuration
2018-04-30 13:11:34,067 [5] XNuvem.Data.Providers.SessionConfigurationCache - Get configuration cache
2018-04-30 13:11:35,995 [5] NHibernate.Tool.hbm2ddl.SchemaValidator - could not complete schema validation
NHibernate.HibernateException: Missing table: AGENDA
   em NHibernate.Cfg.Configuration.ValidateSchema(Dialect dialect, DatabaseMetadata databaseMetadata)
   em NHibernate.Tool.hbm2ddl.SchemaValidator.Validate()
2018-04-30 13:11:36,119 [5] XNuvem.Data.Schema.DefaultSchemaUpdate - Erro ao validar o schema
NHibernate.HibernateException: Missing table: AGENDA
   em NHibernate.Cfg.Configuration.ValidateSchema(Dialect dialect, DatabaseMetadata databaseMetadata)
   em NHibernate.Tool.hbm2ddl.SchemaValidator.Validate()
   em XNuvem.Data.Schema.DefaultSchemaUpdate.HasUpdates() na D:\Projetos\PETS\codigo\XNuvem.Framework\Data\Schema\DefaultSchemaUpdate.cs:linha 43
2018-04-30 13:11:41,023 [5] XNuvem.Data.TransactionManager - Committing transaction
2018-04-30 13:11:41,319 [5] XNuvem.Data.TransactionManager - Disposing session
2018-04-30 13:11:41,323 [5] XNuvem.Environment.DefaultShellEventHandler - On end request - http://localhost:8090/settingsinstall/install
2018-04-30 13:12:24,425 [6] XNuvem.Environment.DefaultShellEventHandler - On begin request - http://localhost:8090/settings/install/install
2018-04-30 13:12:24,429 [6] XNuvem.Data.SessionFactoryHolder - Building session factory
2018-04-30 13:12:24,433 [6] XNuvem.Data.SessionFactoryHolder - Building configuration
2018-04-30 13:12:24,433 [6] XNuvem.Data.Providers.DefaultDataServiceProvider - Build database configuration
2018-04-30 13:12:24,437 [6] XNuvem.Data.Providers.SessionConfigurationCache - Get configuration cache
2018-04-30 13:12:24,509 [6] XNuvem.Data.SessionFactoryHolder - Done Building configuration
2018-04-30 13:12:24,565 [6] XNuvem.Data.SessionFactoryHolder - Done building session factory
2018-04-30 13:12:24,565 [6] XNuvem.Data.TransactionManager - Opening NHibernate session
2018-04-30 13:12:24,941 [7] XNuvem.Data.Providers.DefaultDataServiceProvider - Build database configuration
2018-04-30 13:12:24,945 [7] XNuvem.Data.Providers.SessionConfigurationCache - Get configuration cache
2018-04-30 13:12:25,557 [7] NHibernate.Tool.hbm2ddl.SchemaValidator - could not complete schema validation
NHibernate.HibernateException: Missing table: AGENDA
   em NHibernate.Cfg.Configuration.ValidateSchema(Dialect dialect, DatabaseMetadata databaseMetadata)
   em NHibernate.Tool.hbm2ddl.SchemaValidator.Validate()
2018-04-30 13:12:25,605 [7] XNuvem.Data.Schema.DefaultSchemaUpdate - Erro ao validar o schema
NHibernate.HibernateException: Missing table: AGENDA
   em NHibernate.Cfg.Configuration.ValidateSchema(Dialect dialect, DatabaseMetadata databaseMetadata)
   em NHibernate.Tool.hbm2ddl.SchemaValidator.Validate()
   em XNuvem.Data.Schema.DefaultSchemaUpdate.HasUpdates() na D:\Projetos\PETS\codigo\XNuvem.Framework\Data\Schema\DefaultSchemaUpdate.cs:linha 43
2018-04-30 13:12:25,609 [7] XNuvem.Environment.Configuration.ShellSettingsManager - Storing configuration settings.
2018-04-30 13:12:25,633 [7] XNuvem.Data.Schema.DefaultSchemaUpdate - Start creating database
2018-04-30 13:12:25,637 [7] XNuvem.FileSystems.AppData.AppDataFolder - Deleting file "mappings.bin" from "App_Data" folder
2018-04-30 13:12:25,641 [7] XNuvem.Environment.Configuration.ShellSettingsManager - Loading shell configurations
2018-04-30 13:12:25,653 [7] XNuvem.Data.Providers.DefaultDataServiceProvider - Build database configuration
2018-04-30 13:12:25,657 [7] XNuvem.Data.Providers.SessionConfigurationCache - Get configuration cache
2018-04-30 13:12:25,821 [7] XNuvem.Data.Providers.SessionConfigurationCache - Setting configuration cache
2018-04-30 13:12:25,889 [7] XNuvem.Data.Providers.DefaultDataServiceProvider - Done build database configuration
2018-04-30 13:13:00,374 [7] XNuvem.Environment.Configuration.ShellSettingsManager - Storing configuration settings.
2018-04-30 13:13:00,382 [7] XNuvem.Data.Schema.DefaultSchemaUpdate - End create database
2018-04-30 13:13:00,398 [7] XNuvem.Data.TransactionManager - Committing transaction
2018-04-30 13:13:00,678 [7] XNuvem.Data.TransactionManager - Disposing session
2018-04-30 13:13:00,682 [7] XNuvem.Data.TransactionManager - Opening NHibernate session
2018-04-30 13:13:00,994 [7] XNuvem.Data.Repository`1[[XNuvem.Data.Schema.MigrationHistory, XNuvem.Framework, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] - Create XNuvem.Data.Schema.MigrationHistory
2018-04-30 13:13:01,429 [7] XNuvem.Data.TransactionManager - Committing transaction
2018-04-30 13:13:01,805 [7] XNuvem.Data.TransactionManager - Disposing session
2018-04-30 13:13:01,813 [7] XNuvem.Data.TransactionManager - Opening NHibernate session
2018-04-30 13:13:07,556 [10] XNuvem.Security.XNuvemUserService - Creating identity for user Davi
2018-04-30 13:13:08,404 [6] XNuvem.Data.TransactionManager - Committing transaction
2018-04-30 13:13:08,672 [6] XNuvem.Data.TransactionManager - Disposing session
2018-04-30 13:13:08,672 [6] XNuvem.Data.TransactionManager - Opening NHibernate session
2018-04-30 13:13:08,992 [7] XNuvem.Data.TransactionManager - Committing transaction
2018-04-30 13:13:09,196 [7] XNuvem.Data.TransactionManager - Disposing session
2018-04-30 13:13:09,224 [7] XNuvem.Environment.DefaultShellEventHandler - On end request - http://localhost:8090/settings/install/install
2018-04-30 13:13:09,260 [6] XNuvem.Environment.Configuration.ShellSettingsManager - Loading shell configurations
2018-04-30 13:13:09,276 [6] XNuvem.Environment.DefaultShellEventHandler - On begin request - http://localhost:8090/?area=
2018-04-30 13:13:09,280 [6] XNuvem.Data.SessionFactoryHolder - Building session factory
2018-04-30 13:13:09,280 [6] XNuvem.Data.SessionFactoryHolder - Building configuration
2018-04-30 13:13:09,284 [6] XNuvem.Data.Providers.DefaultDataServiceProvider - Build database configuration
2018-04-30 13:13:09,284 [6] XNuvem.Data.Providers.SessionConfigurationCache - Get configuration cache
2018-04-30 13:13:09,320 [6] XNuvem.Data.SessionFactoryHolder - Done Building configuration
2018-04-30 13:13:09,356 [6] XNuvem.Data.SessionFactoryHolder - Done building session factory
2018-04-30 13:13:09,356 [6] XNuvem.Data.TransactionManager - Opening NHibernate session
2018-04-30 13:13:16,053 [6] XNuvem.Data.TransactionManager - Committing transaction
2018-04-30 13:13:16,345 [6] XNuvem.Data.TransactionManager - Disposing session
2018-04-30 13:13:16,349 [6] XNuvem.Environment.DefaultShellEventHandler - On end request - http://localhost:8090/?area=
